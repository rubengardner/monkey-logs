# Story 3.5: Delete Workout Template

## Status

Draft

## Story

**As a** developer,
**I want** a `DELETE /workout-templates/{template_id}` endpoint,
**so that** a user can permanently delete one of their `WorkoutTemplate`s.

## Acceptance Criteria

1.  A `DELETE` request to `/workout-templates/{template_id}` permanently deletes the specified `WorkoutTemplate` from the database.
2.  A successful deletion returns a `204 No Content` HTTP status code with an empty response body.
3.  The endpoint must be protected, returning `401 Unauthorized` if the user is not authenticated.
4.  If the `template_id` does not exist, the endpoint must return a `404 Not Found`.
5.  If the authenticated user is not the owner of the template, the endpoint must return a `403 Forbidden`.

## Tasks / Subtasks

*   `[ ]` **Task 1: Implement the `DELETE /workout-templates/{template_id}` endpoint.** (AC: #1, #2, #3)
    *   `[ ]` Subtask 1.1: Add the new `DELETE` endpoint with a `template_id` path parameter to the `apps/api/routers/workout_templates.py` router.
    *   `[ ]` Subtask 1.2: Ensure the endpoint is protected by the `get_current_user` dependency and returns a `204 No Content` status on success.
*   `[ ]` **Task 2: Implement the delete service and repository logic.** (AC: #1, #4, #5)
    *   `[ ]` Subtask 2.1: Create a `delete_template` method in the `WorkoutTemplateService`.
    *   `[ ]` Subtask 2.2: The service must first fetch the template from the repository to verify its existence and ownership.
    *   `[ ]` Subtask 2.3: If the user is authorized, the service will call a `delete` method in the `WorkoutTemplateRepository`.
*   `[ ]` **Task 3: Write tests for the delete endpoint.**
    *   `[ ]` Subtask 3.1: Write an integration test for a successful deletion (204).
    *   `[ ]` Subtask 3.2: Write tests for the failure cases: `404 Not Found`, `403 Forbidden`, and `401 Unauthorized`.

## Dev Notes

*   **HTTP Status Code:** Ensure the endpoint is configured to return a `204 No Content` status on a successful deletion.
*   **Authorization First:** The service logic must fetch the entity and verify ownership *before* attempting the deletion to prevent leaking information.
*   **Dependencies:** The tests for this story will need to create a user and a workout template to have an entity to delete.

## Change Log

| Date | Version | Description | Author |
| :--- | :--- | :--- | :--- |
| 2025-09-23 | 1.0 | Initial draft | Sarah |
